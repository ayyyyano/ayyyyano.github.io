# 斐讯 N1 使用 iStoreOS 实现旁路由功能
### 前言
前段时间，我在 Bilibili 上发布了有关 N1 刷入第三方固件并实现 U 盘启动的视频。
这的确只是一个演示视频，我不打算发布刷入教程以及配置方法，网上有很详尽的相关内容。我整理资源给大伙自行研究就好。
不过有一点要说明的是，目前 F 大的 OpenWRT 固件已不是 N1 作为旁路由的最佳选择。可以使用有对 N1 进行专门适配的 [iStoreOS](https://fw.koolcenter.com/iStoreOS/alpha/n1/) 。
iStoreOS 在官方文档中已有详细的刷机方法说明，下面只是原内容搬运。
iStoreOS 的文件我也一同上传到了先前链接的 OpenWRT 文件夹中。但是我更建议通过官方渠道进行下载。

### 刷机方法
[参考](https://doc.linkease.com/zh/guide/istoreos/install_sd.html)先刷到U盘
开机前连接HDMI显示器启动的话可以显示终端，所以可以接到HDMI看打印日志，注意必须在开机前就接上HDMI显示器才有效。如果接了USB键盘，当显示器的日志不再滚动时按键盘回车键可以进入iStoreOS命令行。
默认网口是DHCP客户端，所以IP不是固定的，在连接显示器启动的情况下可以在命令行执行ip addr命令查看IP，否则在主路由后台看看最近分配的IP地址。
系统启动过程中，前面的LOGO灯会闪。一般开机后20秒内灯会开始闪，系统初始化完毕以后灯变成常亮。如果开机以后30秒灯还不闪，估计启动失败了。

如果要升级固件，不需要重新制作U盘或写入eMMC，只需下载新固件（无需解压），然后在网页后台“系统”-“备份/升级”，点击“刷写固件”按钮，上传新固件，然后按页面提示升级。
如果遇到问题，或者怀疑固件BUG，那么分以下情况重新刷机：
如果盒子是原厂固件：如果版本比较高要先降级到2.19（具体怎么降级B站很多教程，至少Bootloader要降级），降级以后进安卓系统，联网获取IP，然后插上制作好的U盘，然后用电脑执行adb connect 盒子IP连接盒子，再执行adb shell reboot update，系统会自动重启几次，之后就会进入iStoreOS了。
如果盒子原本就是Linux系统（非安卓），例如armbian或flippy的固件：那只要插上制作好的U盘即可启动到iStoreOS。
如果原本是砖，或者想完全恢复出厂状态，或者遇到其他系统启动问题：那么参考B站的救砖教程（可能需要拆机），救砖以后就按原厂固件刷机流程。